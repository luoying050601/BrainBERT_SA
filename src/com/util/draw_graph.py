import numpy as np
import matplotlib.pyplot as plt

epoch = num=list(range(1,500))
pereira_ae_acc = [
        0.08300395256916997,
        0,
        0.010903426791277258,
        0.02252252252252252,
        0.0,
        0.025075225677031094,
        0.16666666666666666,
        0.023026315789473683,
        0.028747433264887063,
        0.026578073089700997,
        0.04201680672268908,
        0.020134228187919462,
        0.0308411214953271,
        0.023094688221709007,
        0.05660377358490566,
        0.019230769230769232,
        0.022332506203473945,
        0.024057738572574178,
        0.027878787878787878,
        0.023114355231143552,
        0.022082018927444796,
        0.03283173734610123,
        0.02727272727272727,
        0.026923076923076925,
        0.025203854707190512,
        0.021823850350740453,
        0.028985507246376812,
        0.025943396226415096,
        0.026533996683250415,
        0.005025125628140704,
        0.02830188679245283,
        0.025729836714497772,
        0.023121387283236993,
        0.0,
        0.0,
        0.026881720430107527,
        0.016722408026755852,
        0.019249278152069296,
        0.02766798418972332,
        0.02145922746781116,
        0.027586206896551724,
        0.02654232424677188,
        0.02768860353130016,
        0.0398406374501992,
        0.020689655172413793,
        0.027818448023426062,
        0.028735632183908046,
        0.020618556701030927,
        0.0,
        0.02226027397260274,
        0.027993779160186624,
        0.01858736059479554,
        0.019662921348314606,
        0.01694915254237288,
        0.023157894736842106,
        0.028169014084507043,
        0.020833333333333332,
        0.02074688796680498,
        0.023688663282571912,
        0.02899239543726236,
        0.0,
        0.026232114467408585,
        0.026900584795321637,
        0.014388489208633094,
        0.04504504504504504,
        0.018867924528301886,
        0.013948497854077254,
        0.038461538461538464,
        0.019400352733686066,
        0.026595744680851064,
        0.025016458196181698,
        0.03508771929824561,
        0.02696629213483146,
        0.014527845036319613,
        0.025763358778625955,
        0.016830294530154277,
        0.02030708271421496,
        0.013301088270858524,
        0.024390243902439025,
        0.02156549520766773,
        0.023693379790940768,
        0.04262295081967213,
        0.03471295060080107,
        0.013498312710911136,
        0.03896103896103896,
        0.01859504132231405,
        0.03128205128205128,
        0.024774774774774775,
        0.027070063694267517,
        0.02422480620155039,
        0.025495750708215296,
        0.018092105263157895,
        0.014492753623188406,
        0.024896265560165973,
        0.01079136690647482,
        0.026923076923076925,
        0.027160493827160494,
        0.06451612903225806,
        0.025078369905956112,
        0.019635343618513323,
        0.018518518518518517,
        0.03206106870229008,
        0.021321961620469083,
        0.029465930018416207,
        0.02142857142857143,
        0.030042918454935622,
        0.022587268993839837,
        0.026365348399246705,
        0.027237354085603113,
        0.02260327357755261,
        0.021669341894060994,
        0.02618657937806874,
        0.01858736059479554,
        0.022388059701492536,
        0.02402022756005057,
        0.0,
        0,
        0.03355704697986577,
        0,
        0.0,
        0.060240963855421686,
        0.02027027027027027,
        0.025735294117647058,
        0.02897278314310799,
        0.02706359945872801,
        0.029093931837073983,
        0.0,
        0.01824817518248175,
        0.01927437641723356,
        0.0297029702970297,
        0.034482758620689655,
        0.025889967637540454,
        0.024336283185840708,
        0.013569937369519834,
        0.02054794520547945,
        0.022743947175348497,
        0.022113022113022112,
        0.02810077519379845,
        0.03276353276353276,
        0.02127659574468085,
        0.024765157984628524,
        0.07407407407407407,
        0.031818181818181815,
        0.019400352733686066,
        0.01698754246885617,
        0.03580562659846547,
        0.03024193548387097,
        0.021052631578947368,
        0,
        0.02040816326530612,
        0.03712871287128713,
        0.05202312138728324,
        0.007462686567164179,
        0.03076923076923077,
        0.024390243902439025,
        0.0,
        0.03039832285115304,
        0.01511879049676026,
        0.02197802197802198,
        0.011695906432748537,
        0.025150549061282324,
        0.02446183953033268,
        0.024324324324324326,
        0.026277372262773723,
        0.017350157728706624,
        0.0380952380952381,
        0.027742749054224466,
        0.02072538860103627,
        0.01904761904761905,
        0.02237136465324385,
        0.023928215353938187,
        0.0,
        0.0,
        0.028169014084507043,
        0.021822849807445442,
        0.01675977653631285,
        0.022222222222222223,
        0.012578616352201259,
        0.041666666666666664,
        0.02040816326530612,
        0.0,
        0.02564102564102564,
        0.02403204272363151,
        0.020338983050847456,
        0.019230769230769232,
        0.018154311649016642,
        0.0,
        0.025477707006369428,
        0.018558951965065504,
        0.020463847203274217,
        0.020512820512820513,
        0.031294452347083924,
        0.029641185647425898,
        0.03383458646616541,
        0.024,
        0.030064423765211165,
        0.009852216748768473,
        0.006944444444444444,
        0.045081967213114756,
        0.015267175572519083
    ]
# alice_cae_acc = [6.32,6.12,5.54,6.02,6.28,6.45,5.95,5.36,5.26,6.21,6.71,
#                  7.79,3.40,5.81, 5.49,5.86,6.14,4.55,5.37,7.50,6.32,3.55,6.70,6.06, 5.57,6.20,9.20,6.62,6.27,4.60,6.56,4.76,6.84,5.93,7.27,7.52,5.19, 6.19,4.85,6.01, 7.85,6.48,6.59,6.87,7.21,7.19,5.07,3.23,5.64
# ]
# pereira_ae_acc =[6.12,7.22,4.66,7.80,6.09,6.23,7.45,6.35,6.87,7.69,7.00,7.14,8.26,
#                  5.79,7.20,5.64,8.70,5.85,6.42,6.65,4.00,5.69,7.02,7.15,4.17,10.87,7.41,3.68]


def wash_outlier(deg):
    # mean = np.mean(deg)
    # var = np.var(deg)
    # print("原始数据共", len(deg), "个\n", deg)
    '''
    for i in range(len(deg)):
        print(deg[i],'→',(deg[i] - mean)/var)
        #另一个思路，先归一化，即标准正态化，再利用3σ原则剔除异常数据，反归一化即可还原数据
    '''
    # print("中位数:",np.median(deg))
    percentile = np.percentile(deg, (25, 50, 75), interpolation='midpoint')
    # pri/nt("分位数：", percentile)
    # 以下为箱线图的五个特征值
    Q1 = percentile[0]  # 上四分位数
    Q3 = percentile[2]  # 下四分位数
    IQR = Q3 - Q1  # 四分位距
    ulim = Q3 + 1.5 * IQR  # 上限 非异常范围内的最大值
    llim = Q1 - 1.5 * IQR  # 下限 非异常范围内的最小值

    new_deg = []
    for i in range(len(deg)):
        if (llim < deg[i] and deg[i] < ulim):
            new_deg.append(deg[i])
    return new_deg,len(new_deg)
# pereira_ae_acc =
# all_acc =
pereira_ae_acc,actual_size = wash_outlier(pereira_ae_acc)
# pereira_ae_acc,actual_size = wash_outlier(pereira_ae_acc)
c = np.mean(pereira_ae_acc)
print(c)
print(np.max(pereira_ae_acc))
print(len(pereira_ae_acc))
# l1 = plt.plot(epoch, alice_cae_acc, 'r--', label='alice')
# l2 = plt.plot(x1, y2, 'g', label='pereira')
# l3 = plt.plot(x1, y1, 'r', label='a')
# l3 = plt.plot(x3, y3, 'b--', label='type3')
plt.axhline(y=c, color="orange")
# ax = plt.subplot()
# area = np.pi * (20 * np.random.rand(20)) ** 2  # 点的半径范围:0~15
plt.scatter(epoch[:actual_size], pereira_ae_acc, alpha=0.6)  # 绘制散点图，透明度为0.6（这样颜色浅一点，比较好看）

# ax.scatter(epoch, alice_cae_acc, s=area, c='pink', alpha=0.3)
# ax.scatter(x1, y2, s=area, c='green', alpha=0.4)  # 改变颜色
# for a, b, c in zip(x1, alice_cae_acc, y2):
#     plt.text(a, b, b, ha='center', va='center', fontsize=9)
#     plt.text(a, c, c, ha='center', va='center', fontsize=9)
# plt.plot(x1, y1, 'ro-')
# plt.plot(x1, y2, 'bo-')
# plt.plot(x2, y2, 'bo-')
# plt.title('MLM Pereira AE ACC')
plt.title('MLM Alice 3D-CAE ACC')
plt.xlabel('epoch(* 1e03)')
plt.ylabel('accuracy(%)')
plt.legend()
# plt.savefig("ae_loss.png")
plt.show()
